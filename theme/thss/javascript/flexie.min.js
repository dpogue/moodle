var Flexie=function(win,doc){function ensureStructuralIntegrity(a,b){var c=a.target;c.FLX_DOM_ID||(c.FLX_DOM_ID=c.FLX_DOM_ID||++FLX_DOM_ID),a.nodes||(a.nodes=sanitizeChildren(c,c.childNodes)),a.selector||(a.selector=buildSelector(c),c.setAttribute(FLX_PARENT_ATTR,TRUE)),a.properties||(a.properties=[]),a.children||(a.children=matchFlexChildren(c,LIBRARY,sanitizeChildren(c,c.childNodes))),a.nested||(a.nested=a.selector+" ["+FLX_PARENT_ATTR+"]"),a.target=c,a._instance=b;return a}function updateChildValues(a){a.flexMatrix&&forEach(a.children,function(b,c){c.flex=a.flexMatrix[b]}),a.ordinalMatrix&&forEach(a.children,function(b,c){c["ordinal-group"]=a.ordinalMatrix[b]});return a}function dimensionValues(a,b){var c=a.parentNode,d,e;c.FLX_DOM_ID&&(d=FLEX_BOXES[c.FLX_DOM_ID],forEach(d.properties,function(a,c){if((new RegExp(b)).test(c.property)){e=TRUE;return FALSE}}));return e}function parentFlex(a){var b=0,c=a.parentNode,d,e,f;while(c.FLX_DOM_ID)d=FLEX_BOXES[c.FLX_DOM_ID],e=createMatchMatrix(d.children,sanitizeChildren(c,c.childNodes),NULL),b+=e.total,f=TRUE,c=c.parentNode;return{nested:f,flex:b}}function sanitizeChildren(a,b){var c=[],d,e,f;for(e=0,f=b.length;e<f;e++){d=b[e];if(d)switch(d.nodeName.toLowerCase()){case"script":case"style":case"link":break;default:d.nodeType===1?c.push(d):d.nodeType===3&&(d.isElementContentWhitespace||ONLY_WHITESPACE.test(d.data))&&(a.removeChild(d),e--)}}return c}function cleanPositioningProperties(a){var b,c;forEach(a,function(a,d){b=d.style.width,c=d.style.height,d.style.cssText=EMPTY_STRING,d.style.width=b,d.style.height=c})}function attachResizeListener(a,b){if(!RESIZE_LISTENER){var c,d,e,f,g=doc.body,h=doc.documentElement,i="innerWidth",j="innerHeight",k="clientWidth",l="clientHeight";addEvent("resize",function(){e=win[i]||h[i]||h[k]||g[k],f=win[j]||h[j]||h[l]||g[l];if(c!==e||d!==f)FLX.updateInstance(NULL,NULL),c=e,d=f}),RESIZE_LISTENER=TRUE}}function floatDropFix(a,b,c){var d="offsetTop",e=b.nodes,f,g=!0;f=function(a){return a[d]-getComputedStyle(a,c.anti.pos,TRUE)};while(g&&f(e[0])!==f(e[e.length-1]))forEach(e,function(a,d){if(!b.hasFlex||d.getAttribute("data-flex"))g=Math.max(0,getComputedStyle(d,c.props.dim,TRUE)-1),d.style[c.props.dim]=g})}function createMatchMatrix(a,b,c){var d={},e=[],f=0,g,h="ordinal-group",i="data-"+h;a=filterDuplicates(a,b,c),forEach(b,function(b,e){forEach(a,function(a,b){c?(g=b[h]||"1",b.match===e&&(b.match.setAttribute(i,g),d[g]=d[g]||[],d[g].push(b))):(g=b.flex||"0",b.match===e&&(!b[g]||b[g]&&parseInt(b[g],10)<=1)&&(f+=parseInt(g,10),d[g]=d[g]||[],d[g].push(b)))}),c&&!e.getAttribute(i)&&(g="1",e.setAttribute(i,g),d[g]=d[g]||[],d[g].push({match:e}))}),forEach(d,function(a){e.push(a)}),e.sort(function(a,b){return b-a});return{keys:e,groups:d,total:f}}function filterDuplicates(a,b,c){var d=[],e,f=(c?"ordinal":"flex")+"Specificity";forEach(a,function(a,b){if(!c&&b.flex||c&&b["ordinal-group"])b[f]=b[f]||calculateSpecificity(b.selector),e=FALSE,forEach(d,function(a,c){if(c.match===b.match){c[f]<b[f]&&(d[a]=b),e=TRUE;return FALSE}}),e||d.push(b)});return d}function calculateSpecificity(a){var b,c,d;b=a.replace(CSS_SELECTOR,function(a,b){return"%"+b}).replace(/\s|\>|\+|\~/g,"%").split(/%/g),c={_id:100,_class:10,_tag:1},d=0,forEach(b,function(a,b){/#/.test(b)?d+=c._id:/\.|\[|\:/.test(b)?d+=c._class:/[a-zA-Z]+/.test(b)&&(d+=c._tag)});return d}function appendPixelValue(a,b,c){var d=a&&a[0]?a:[a];forEach(d,function(a,d){d&&d.style&&(d.style[b]=c?c+"px":EMPTY_STRING)})}function appendProperty(a,b,c,d){var e=[];forEach(PREFIXES,function(a,f){e.push((d?f:EMPTY_STRING)+b+":"+(d?EMPTY_STRING:f)+c)}),a.style.cssText+=e.join(";");return a}function clientHeight(a){return a.innerHeight||a.clientHeight}function clientWidth(a){return a.innerWidth||a.clientWidth}function getComputedStyle(a,b,c){var d;win.getComputedStyle?d=win.getComputedStyle(a,NULL)[b]:SIZES.test(b)?d=getPixelValue(a,a&&a.currentStyle?a.currentStyle[b]:0,b):d=a.currentStyle[b],c&&(d=parseInt(d,10),isNaN(d)&&(d=0));return d}function getPixelValue(a,b,c){if(PIXEL.test(b))return b;b==="auto"||b==="medium"?b=unAuto(a,b,c):b=getTrueValue(a,c);return b}function unAuto(a,b,c){var d;switch(c){case"width":d=[PADDING_LEFT,PADDING_RIGHT,BORDER_LEFT,BORDER_RIGHT],b=calcPx(a,d,c);break;case"height":d=[PADDING_TOP,PADDING_BOTTOM,BORDER_TOP,BORDER_BOTTOM],b=calcPx(a,d,c);break;default:b=getTrueValue(a,c)}return b}function getTrueValue(a,b){var c,d,e=a.currentStyle&&a.currentStyle[b],f=a.style;!PIXEL.test(e)&&NUMBER.test(e)&&(c=f.left,d=a.runtimeStyle.left,a.runtimeStyle.left=a.currentStyle.left,f.left=e||0,e=f.pixelLeft+"px",f.left=c||0,a.runtimeStyle.left=d);return e}function calcPx(a,b,c){var d=c.replace(c.charAt(0),c.charAt(0).toUpperCase()),e=a["offset"+d]||0;e&&forEach(b,function(b,c){c=parseFloat(a.currentStyle[c]),isNaN(c)||(e-=c)});return e}function buildFlexieCall(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q={},r,s,t,u="["+FLX_PARENT_ATTR+"]";!a||(forEach(a.boxes,function(o,v){v.selector=trim(v.selector),b=v.selector,c=v.properties,g=h=i=j=k=NULL,forEach(c,function(a,b){d=trim(b.property),e=trim(b.value);if(d){f=d.replace("box-",EMPTY_STRING);switch(f){case"display":e==="box"&&(g=e);break;case"orient":h=e;break;case"align":i=e;break;case"direction":j=e;break;case"pack":k=e}}}),l=LIBRARY,m=l(v.selector),m=m[0]?m:[m],forEach(m,function(d,e){e.nodeType&&(setFlexieId(e),n=matchFlexChildren(e,l,a.children),t=b+" "+u,p={target:e,selector:b,properties:c,children:n,display:g,orient:h,align:i,direction:j,pack:k,nested:t},r=q[e.FLX_DOM_ID],r?forEach(p,function(a,b){switch(a){case"selector":b&&!(new RegExp(b)).test(r[a])&&(r[a]+=", "+b);break;case"children":forEach(p[a],function(b,c){s=FALSE,forEach(r[a],function(a,b){c.match.FLX_DOM_ID===b.match.FLX_DOM_ID&&(s=TRUE)}),s||r[a].push(c)});break;default:b&&(r[a]=b)}}):(q[e.FLX_DOM_ID]=getParams(p),q[e.FLX_DOM_ID].target.setAttribute(FLX_PARENT_ATTR,TRUE)))})}),DOM_ORDERED=LIBRARY(u),FLEX_BOXES={},forEach(DOM_ORDERED,function(a,b){FLEX_BOXES[b.FLX_DOM_ID]=q[b.FLX_DOM_ID]}),forEach(FLEX_BOXES,function(a,b){b.display==="box"&&(o=new FLX.box(b))}))}function getParams(a){forEach(a,function(b,c){a[b]=c||DEFAULTS[b]});return a}function matchFlexChildren(a,b,c){var d,e,f=[];forEach(c,function(c,g){g.selector?(d=b(g.selector),d=d[0]?d:[d],d[0]&&forEach(d,function(b,c){if(c.nodeName!==UNDEFINED)switch(c.nodeName.toLowerCase()){case"script":case"style":case"link":break;default:c.parentNode===a&&(setFlexieId(c),e={},forEach(g,function(a){e[a]=g[a]}),e.match=c,f.push(e))}})):(setFlexieId(g),f.push({match:g,selector:buildSelector(g)}))});return f}function findFlexboxElements(a){var b,c,d,e,f,g=/\s?,\s?/,h,i,j={},k={};h=function(a,b,c,d){var e={selector:trim(a),properties:[]};forEach(b.properties,function(a,b){e.properties.push({property:trim(b.property),value:trim(b.value)})}),c&&d&&(e[c]=d);return e},i=function(a,b,c,d){var e=c&&d?j[a]:k[a],f;e?(forEach(b.properties,function(a,b){forEach(e.properties,function(a,c){if(b.property===c.property){f=a;return!1}}),f?e.properties[f]=b:e.properties.push(b)}),c&&d&&(e[c]=d)):c&&d?j[a]=h(a,b,c,d):k[a]=h(a,b,NULL,NULL)},forEach(a,function(a,h){b=trim(h.selector).replace(g,",").split(g),forEach(b,function(a,b){b=trim(b),c=h.properties,forEach(c,function(a,c){d=trim(c.property),e=trim(c.value);if(d){f=d.replace("box-",EMPTY_STRING);switch(f){case"display":e==="box"&&i(b,h,NULL,NULL);break;case"orient":case"align":case"direction":case"pack":i(b,h,NULL,NULL);break;case"flex":case"flex-group":case"ordinal-group":i(b,h,f,e)}}})})}),forEach(k,function(a,b){FLEX_BOXES.push(b)}),forEach(j,function(a,b){POSSIBLE_FLEX_CHILDREN.push(b)});return{boxes:FLEX_BOXES,children:POSSIBLE_FLEX_CHILDREN}}function buildSelectorTree(a){var b=[],c,d,e,f,g,h,i;a=a.replace(WHITESPACE_CHARACTERS,EMPTY_STRING),a=a.replace(/\s?(\{|\:|\})\s?/g,PLACEHOLDER_STRING),c=a.split(END_MUSTACHE),forEach(c,function(a,c){c&&(d=[c,END_MUSTACHE].join(EMPTY_STRING),e=/(.*)\{(.*)\}/.exec(d),e&&e[2]&&(f=e[1],g=e[2].split(";"),i=[],forEach(g,function(a,b){h=b.split(":"),h.length&&h[1]&&i.push({property:h[0],value:h[1]})}),f&&i.length&&b.push({selector:f,properties:i})))});return b}function setFlexieId(a){a.FLX_DOM_ID||(FLX_DOM_ID=FLX_DOM_ID+1,a.FLX_DOM_ID=FLX_DOM_ID,a.setAttribute(FLX_DOM_ATTR,a.FLX_DOM_ID))}function buildSelector(a){var b=a.nodeName.toLowerCase();a.id?b+="#"+a.id:a.FLX_DOM_ID&&(b+="["+FLX_DOM_ATTR+"='"+a.FLX_DOM_ID+"']");return b}function attachLoadMethod(handler){ENGINE||(LIBRARY=determineSelectorMethod());var engines=ENGINES,method,caller,args;forEach(engines,function(engine,obj){if(win[engine]&&!method&&obj.m){method=eval(obj.m.replace("*",engine)),caller=obj.c?eval(obj.c.replace("*",engine)):win,args=[];if(method&&caller){obj.p&&args.push(obj.p),args.push(handler),method.apply(caller,args);return!1}}}),method||addEvent("load",handler)}function addEvent(a,b){a="on"+a;var c=win[a];typeof win[a]!="function"?win[a]=b:win[a]=function(){c&&c(),b()}}function determineSelectorMethod(){var engines=ENGINES,method;forEach(engines,function(engine,obj){if(win[engine]&&!method){method=eval(obj.s.replace("*",engine));if(method){ENGINE=engine;return!1}}});return method}function forEach(a,b){var c,d=0,e,f=a?a.length:UNDEFINED,g=f===UNDEFINED;if(g){for(c in a)if(a.hasOwnProperty(c)&&b.call(a[c],c,a[c])===FALSE)break}else for(e=a[0];d<f&&b.call(e,d,e)!==FALSE;e=a[++d])continue}function trim(a){a&&(a=a.replace(LEADINGTRIM,EMPTY_STRING).replace(TRAILINGTRIM,EMPTY_STRING));return a}var FLX={},FLX_DOM_ID=0,FLX_DOM_ATTR="data-flexie-id",FLX_PARENT_ATTR="data-flexie-parent",SUPPORT,ENGINE,ENGINES={NW:{s:"*.Dom.select"},DOMAssistant:{s:"*.$",m:"*.DOMReady"},Prototype:{s:"$$",m:"document.observe",p:"dom:loaded",c:"document"},MooTools:{s:"$$",m:"window.addEvent",p:"domready"},Sizzle:{s:"*"},jQuery:{s:"*",m:"*(document).ready"},dojo:{s:"*.query",m:"*.addOnLoad"}},LIBRARY,PIXEL=/^-?\d+(?:px)?$/i,NUMBER=/^-?\d/,SIZES=/width|height|margin|padding|border/,MSIE=/(msie) ([\w.]+)/,WHITESPACE_CHARACTERS=/\t|\n|\r/g,RESTRICTIVE_PROPERTIES=/^max\-([a-z]+)/,PROTOCOL=/^https?:\/\//i,LEADINGTRIM=/^\s\s*/,TRAILINGTRIM=/\s\s*$/,ONLY_WHITESPACE=/^\s*$/,CSS_SELECTOR=/\s?(\#|\.|\[|\:(\:)?[^first\-(line|letter)|before|after]+)/g,EMPTY_STRING="",SPACE_STRING=" ",PLACEHOLDER_STRING="$1",PADDING_RIGHT="paddingRight",PADDING_BOTTOM="paddingBottom",PADDING_LEFT="paddingLeft",PADDING_TOP="paddingTop",BORDER_RIGHT="borderRightWidth",BORDER_BOTTOM="borderBottomWidth",BORDER_LEFT="borderLeftWidth",BORDER_TOP="borderTopWidth",HORIZONTAL="horizontal",VERTICAL="vertical",INLINE_AXIS="inline-axis",BLOCK_AXIS="block-axis",INHERIT="inherit",LEFT="left",END_MUSTACHE="}",PREFIXES=" -o- -moz- -ms- -webkit- -khtml- ".split(SPACE_STRING),DEFAULTS={orient:HORIZONTAL,align:"stretch",direction:INHERIT,pack:"start"},FLEX_BOXES=[],POSSIBLE_FLEX_CHILDREN=[],DOM_ORDERED,RESIZE_LISTENER,TRUE=!0,FALSE=!1,NULL=null,UNDEFINED,BROWSER={IE:function(){var a,b=win.navigator.userAgent,c=MSIE.exec(b.toLowerCase());c&&(a=parseInt(c[2],10));return a}()},selectivizrEngine;selectivizrEngine=function(){function p(d){if(d)return n(d).replace(a,EMPTY_STRING).replace(b,function(a,b,c){return p(o(c,d))}).replace(c,function(a,b,c){b=b||EMPTY_STRING;return" url("+b+o(c,d)+b+") "});return EMPTY_STRING}function o(a,b){function c(a){return a.substring(0,a.indexOf("/",8))}if(!!a){if(PROTOCOL.test(a))return c(b)===c(a)?a:NULL;if(a.charAt(0)==="/")return c(b)+a;var d=b.split("?")[0];a.charAt(0)!=="?"&&d.charAt(d.length-1)!=="/"&&(d=d.substring(0,d.lastIndexOf("/")+1));return d+a}}function n(a){var b=m();b.open("GET",a,FALSE),b.send();return b.status===200?b.responseText:EMPTY_STRING}function m(){if(win.XMLHttpRequest)return new win.XMLHttpRequest;try{return new win.ActiveXObject("Microsoft.XMLHTTP")}catch(a){return NULL}}function l(a){return a.replace(d,function(a,b,c){var d,e;d=c.split(","),forEach(d,function(a,b){e=k(b)+SPACE_STRING});return b+d.join(",")})}function k(a){return j(a.replace(e,PLACEHOLDER_STRING).replace(f,PLACEHOLDER_STRING))}function j(a){return i(a).replace(g,SPACE_STRING)}function i(a){return a.replace(h,PLACEHOLDER_STRING)}var a=/(\/\*[^*]*\*+([^\/][^*]*\*+)*\/)\s*/g,b=/@import\s*(?:url\(\s*?)?(["'])?(.*?)\1\s*\)?[\w\W]*?;/g,c=/\surl\((["'])?([^"')]+)\1\)/g,d=/(^|\})\s*([^\{]*?[\[:][^\{]+)/g,e=/([(\[+~])\s+/g,f=/\s+([)\]+~])/g,g=/\s+/g,h=/^\s*((?:[\S\s]*\S)?)\s*$/;return function(){var a,b,c,d,e=doc.getElementsByTagName("BASE"),f=e.length>0?e[0].href:doc.location.href,g,h,i;for(c=0,d=doc.styleSheets.length;c<d;c++)b=doc.styleSheets[c],b&&b.href!==NULL&&(a=o(b.href,f),a&&(g=l(p(a)),h=buildSelectorTree(g),i=findFlexboxElements(h)));buildFlexieCall(i)}}(),FLX.box=function(a){return this.renderModel(a)},FLX.box.prototype={properties:{boxModel:function(a,b,c){var d,e,f,g;a.style.display="block",BROWSER.IE===8&&(a.style.overflow="hidden"),c.cleared||(selectors=c.selector.split(/\s?,\s?/),e=doc.styleSheets,e=e[e.length-1],f="padding-top:"+(getComputedStyle(a,PADDING_TOP,NULL)||"0.1px;"),g=["content: '.'","display: block","height: 0","overflow: hidden"].join(";"),forEach(selectors,function(b,c){e.addRule?BROWSER.IE<8?(a.style.zoom="1",BROWSER.IE===6?e.addRule(c.replace(/\>|\+|\~/g,""),f+"zoom:1;",0):BROWSER.IE===7&&e.addRule(c,f+"display:inline-block;",0)):(e.addRule(c,f,0),e.addRule(c+":before",g,0),e.addRule(c+":after",g+";clear:both;",0)):e.insertRule&&(e.insertRule(c+"{"+f+"}",0),e.insertRule(c+":after{"+g+";clear:both;}",0))}),c.cleared=TRUE)},boxDirection:function(a,b,c){var d,e;if(c.direction==="reverse"&&!c.reversed||c.direction==="normal"&&c.reversed)b=b.reverse(),forEach(b,function(b,c){a.appendChild(c)}),d=LIBRARY(c.nested),forEach(d,function(a,b){e=FLEX_BOXES[b.FLX_DOM_ID],e&&e.direction===INHERIT&&(e.direction=c.direction)}),c.reversed=!c.reversed},boxOrient:function(a,b,c){var d=this,e,f;e={pos:"marginLeft",opp:"marginRight",dim:"width",out:"offsetWidth",func:clientWidth,pad:[PADDING_LEFT,PADDING_RIGHT,BORDER_LEFT,BORDER_RIGHT]},f={pos:"marginTop",opp:"marginBottom",dim:"height",out:"offsetHeight",func:clientHeight,pad:[PADDING_TOP,PADDING_BOTTOM,BORDER_TOP,BORDER_BOTTOM]},SUPPORT||forEach(b,function(a,b){b.style[BROWSER.IE>=9?"cssFloat":"styleFloat"]=LEFT;if(c.orient===VERTICAL||c.orient===BLOCK_AXIS)b.style.clear=LEFT;BROWSER.IE===6&&(b.style.display="inline")});switch(c.orient){case VERTICAL:case BLOCK_AXIS:d.props=f,d.anti=e;break;default:d.props=e,d.anti=f}},boxOrdinalGroup:function(a,b,c){var d,e;!b.length||(d=function(d){var e=d.keys;forEach(c.reversed?e:e.reverse(),function(c,d){forEach(b,function(b,c){d===c.getAttribute("data-ordinal-group")&&a.appendChild(c)})})},e=createMatchMatrix(c.children,b,TRUE),e.keys.length>1&&d(e))},boxFlex:function(a,b,c){var d=this,e,f,g,h,i,j,k;!b.length||(e=function(a){var b=a.groups,c=a.keys,e;forEach(c,function(a,c){forEach(b[c],function(a,b){e=NULL,forEach(b.properties,function(a,b){RESTRICTIVE_PROPERTIES.test(b.property)&&(e=parseFloat(b.value))}),(!e||b.match[d.props.out]>e)&&appendPixelValue(b.match,d.props.pos,NULL)})})},f=function(c){var e=0,f,g;forEach(b,function(a,b){e+=getComputedStyle(b,d.props.dim,TRUE),forEach(d.props.pad,function(a,c){e+=getComputedStyle(b,c,TRUE)}),e+=getComputedStyle(b,d.props.pos,TRUE),e+=getComputedStyle(b,d.props.opp,TRUE)}),f=a[d.props.out]-e,forEach(d.props.pad,function(b,c){f-=getComputedStyle(a,c,TRUE)}),g=f/c.total;return{whitespace:f,ration:g}},g=function(b,e){var f=b.groups,g=b.keys,h,i,j=e.ration,k,l,m;forEach(g,function(a,b){k=j*b,forEach(f[b],function(a,c){if(c.match){h=c.match.getAttribute("data-flex"),i=c.match.getAttribute("data-specificity");if(!h||i<=c.flexSpecificity)c.match.setAttribute("data-flex",b),c.match.setAttribute("data-specificity",c.flexSpecificity),l=getComputedStyle(c.match,d.props.dim,TRUE),m=Math.max(0,l+k),appendPixelValue(c.match,d.props.dim,m)}})}),(c.orient===HORIZONTAL||c.orient===INLINE_AXIS)&&floatDropFix(a,c,d)},h=createMatchMatrix(c.children,b,NULL),h.total&&(c.hasFlex=TRUE,i=e(h),j=f(h),k=g(h,j)))},boxAlign:function(a,b,c){var d=this,e,f,g=parentFlex(a);!SUPPORT&&!g.flex&&(c.orient===VERTICAL||c.orient===BLOCK_AXIS)&&(dimensionValues(a,d.anti.dim)||appendPixelValue(a,d.anti.dim,NULL),appendPixelValue(b,d.anti.dim,NULL)),e=a[d.anti.out],forEach(d.anti.pad,function(b,c){e-=getComputedStyle(a,c,TRUE)});switch(c.align){case"start":break;case"end":forEach(b,function(a,b){f=e-b[d.anti.out],f-=getComputedStyle(b,d.anti.opp,TRUE),appendPixelValue(b,d.anti.pos,f)});break;case"center":forEach(b,function(a,b){f=(e-b[d.anti.out])/2,appendPixelValue(b,d.anti.pos,f)});break;default:forEach(b,function(b,c){switch(c.nodeName.toLowerCase()){case"button":case"input":case"select":break;default:var g=0;forEach(d.anti.pad,function(b,d){g+=getComputedStyle(c,d,TRUE),g+=getComputedStyle(a,d,TRUE)}),c.style[d.anti.dim]="100%",f=c[d.anti.out]-g,appendPixelValue(c,d.anti.dim,NULL),f=e,f-=getComputedStyle(c,d.anti.pos,TRUE),forEach(d.anti.pad,function(a,b){f-=getComputedStyle(c,b,TRUE)}),f-=getComputedStyle(c,d.anti.opp,TRUE),f=Math.max(0,f),appendPixelValue(c,d.anti.dim,f)}})}},boxPack:function(a,b,c){var d=this,e=0,f=0,g=0,h,i,j,k,l=b.length-1,m;forEach(b,function(a,b){e+=b[d.props.out],e+=getComputedStyle(b,d.props.pos,TRUE),e+=getComputedStyle(b,d.props.opp,TRUE)}),f=getComputedStyle(b[0],d.props.pos,TRUE),h=a[d.props.out]-e,forEach(d.props.pad,function(b,c){h-=getComputedStyle(a,c,TRUE)}),h<0&&(h=Math.max(0,h));switch(c.pack){case"end":appendPixelValue(b[0],d.props.pos,g+f+h);break;case"center":g&&(g/=2),appendPixelValue(b[0],d.props.pos,g+f+h/2);break;case"justify":i=Math.floor((g+h)/l),k=i*l-h;var n=b.length-1,o;while(n)m=b[n],j=i,k&&(j++,k++),o=getComputedStyle(m,d.props.pos,TRUE)+j,appendPixelValue(m,d.props.pos,o),n--}(c.pack==="end"||c.pack==="justify")&&(c.orient===HORIZONTAL||c.orient===INLINE_AXIS)&&floatDropFix(a,c,d),a.style.overflow=""}},setup:function(a,b,c){var d=this,e,f;if(!(!a||!b||!c))if(SUPPORT&&SUPPORT.partialSupport){e=createMatchMatrix(c.children,b,NULL),f=parentFlex(a),b=sanitizeChildren(a,a.childNodes),d.properties.boxOrient.call(d,a,b,c);if(!e.total||!LIBRARY(c.nested).length)c.align==="stretch"&&!SUPPORT.boxAlignStretch&&(!f.nested||!f.flex)&&d.properties.boxAlign.call(d,a,b,c),c.pack==="justify"&&!SUPPORT.boxPackJustify&&!e.total&&d.properties.boxPack.call(d,a,b,c)}else SUPPORT||forEach(d.properties,function(b,e){e.call(d,a,sanitizeChildren(a,a.childNodes),c)})},trackDOM:function(a){attachResizeListener(this,a)},updateModel:function(a){var b=this,c=a.target,d=a.nodes;cleanPositioningProperties(d);if(a.flexMatrix||a.ordinalMatrix)a=updateChildValues(a);b.setup(c,d,a),b.bubbleUp(c,a)},renderModel:function(a){var b=this,c=a.target,d=c.childNodes;if(!c.length&&!d)return!1;a=ensureStructuralIntegrity(a,this),b.updateModel(a),win.setTimeout(function(){b.trackDOM(a)},0);return b},bubbleUp:function(a,b){var c=this,d,e=b.target.parentNode;while(e)d=FLEX_BOXES[e.FLX_DOM_ID],d&&(cleanPositioningProperties(d.nodes),c.setup(d.target,d.nodes,d)),e=e.parentNode}},FLX.updateInstance=function(a,b){var c;a?(c=FLEX_BOXES[a.FLX_DOM_ID],c?c._instance.updateModel(c):c=new FLX.box(b)):forEach(FLEX_BOXES,function(a,b){b._instance.updateModel(b)})},FLX.getInstance=function(a){return FLEX_BOXES[a.FLX_DOM_ID]},FLX.destroyInstance=function(a){var b,c;c=function(a){a.target.FLX_DOM_ID=NULL,a.target.style.cssText=EMPTY_STRING,forEach(a.children,function(a,b){b.match.style.cssText=EMPTY_STRING})},a?(b=FLEX_BOXES[a.FLX_DOM_ID],b&&c(b)):(forEach(FLEX_BOXES,function(a,b){c(b)}),FLEX_BOXES=[])},FLX.flexboxSupport=function(){var a={},b=100,c,d=doc.createElement("flxbox"),e='<b style="margin: 0; padding: 0; display:block; width: 10px; height:'+b/2+'px"></b>',f,g;d.style.width=d.style.height=b+"px",d.innerHTML=e+e+e,appendProperty(d,"display","box",NULL),appendProperty(d,"box-align","stretch",TRUE),appendProperty(d,"box-pack","justify",TRUE),doc.body.appendChild(d),c=d.firstChild.offsetHeight,f={boxAlignStretch:function(){return c===100},boxPackJustify:function(){var a=0;forEach(d.childNodes,function(b,c){a+=c.offsetLeft});return a===135}},forEach(f,function(b,c){g=c(),g||(a.partialSupport=TRUE),a[b]=g}),doc.body.removeChild(d);return~d.style.display.indexOf("box")?a:FALSE},FLX.init=function(){FLX.flexboxSupported=SUPPORT=FLX.flexboxSupport(),(!SUPPORT||SUPPORT.partialSupport)&&LIBRARY&&selectivizrEngine()},FLX.version="1.0.1",attachLoadMethod(FLX.init);return FLX}(this,document)
